//>>built
define("dgrid/ColumnSet","dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/aspect dojo/query dojo/has ./util/misc put-selector/put xstyle/has-class ./Grid dojo/_base/sniff xstyle/css!./css/columnset.css".split(" "),function(y,z,A,B,n,p,k,g,q,l,C,F){function x(a,b){function c(){k(".dgrid-column-set",b).forEach(function(c){c.scrollLeft=d[c.getAttribute("data-dgrid-column-set-id")]})}var d=a._columnSetScrollLefts;8>g("ie")||g("quirks")?setTimeout(c,1):c()}g.add("event-mousewheel",
function(a,b,c){return"onmousewheel"in c});g.add("event-wheel",function(a,b,c){return"onwheel"in c});C("safari","ie-7");var D=g("event-mousewheel")||g("event-wheel")?function(a){return function(b,c){return n(b,g("event-mousewheel")?"mousewheel":"wheel",function(d){var e=d.target;1!==e.nodeType&&(e=e.parentNode);for(;!k.matches(e,".dgrid-column-set[data-dgrid-column-set-id]",b);)if(e===b||!(e=e.parentNode))return;(d=d.deltaX||-d.wheelDeltaX/3)&&c.call(null,a,e,d)})}}:function(a){return function(b,
c){return n(b,".dgrid-column-set[data-dgrid-column-set-id]:MozMousePixelScroll",function(b){1===b.axis&&c.call(null,a,this,b.detail)})}};return z("dgrid.ColumnSet",null,{postCreate:function(){var a=this;this.inherited(arguments);this.on(D(this),function(b,c,a){c=c.getAttribute("data-dgrid-column-set-id");b=b._columnSetScrollers[c];a=b.scrollLeft+a;b.scrollLeft=0>a?0:a});this.on(".dgrid-column-set:dgrid-cellfocusin",function(b){a._onColumnSetCellFocus(b,this)})},columnSets:[],createRowCells:function(a,
b,c,d){for(var e=l("table.dgrid-row-table"),g=l(e,"tbody tr"),f=0,h=this.columnSets.length;f<h;f++){var E=l(g,a+".dgrid-column-set-cell.dgrid-column-set-"+f+" div.dgrid-column-set[data-dgrid-column-set-id\x3d"+f+"]"),m;if((m=c||this.subRows)&&m.length){for(var k=[],n=f+"-",r=0,p=m.length;r<p;r++){var t=m[r],u=[];u.className=t.className;for(var v=0,q=t.length;v<q;v++){var w=t[v];null!=w.id&&0===w.id.indexOf(n)&&u.push(w)}k.push(u)}m=k}else m=void 0;E.appendChild(this.inherited(arguments,[a,b,m||this.columnSets[f],
d]))}return e},renderArray:function(){var a=this,b=this.inherited(arguments);B.when(b,function(c){for(var b=0;b<c.length;b++)x(a,c[b])});return b},insertRow:function(){var a=this.inherited(arguments);x(this,a);return a},renderHeader:function(){function a(){d._positionScrollers()}this.inherited(arguments);var b=this.columnSets,c=this._columnSetScrollers;this._columnSetScrollerContents={};this._columnSetScrollLefts={};var d=this,e;if(c)for(e in c)l(c[e],"!");else p.after(this,"resize",a,!0),p.after(this,
"styleColumn",a,!0),this._columnSetScrollerNode=l(this.footerNode,"+div.dgrid-column-set-scroller-container");c=this._columnSetScrollers={};e=0;for(c=b.length;e<c;e++)this._putScroller(b[e],e);this._positionScrollers()},styleColumnSet:function(a,b){var c=this.addCssRule("#"+q.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-set-"+q.escapeCssIdentifier(a,"-"),b);this._positionScrollers();return c},_destroyColumns:function(){var a=this.columnSets.length,b,c,d,e,g,f,h,k;for(b=0;b<a;b++)for(f=this.columnSets[b],
c=0,e=f.length;c<e;c++)for(h=f[c],d=0,g=h.length;d<g;d++)k=h[d],"function"===typeof k.destroy&&k.destroy();this.inherited(arguments)},configStructure:function(){this.columns={};this.subRows=[];for(var a=0,b=this.columnSets.length;a<b;a++)for(var c=this.columnSets[a],d=0;d<c.length;d++)c[d]=this._configColumns(a+"-"+d+"-",c[d]);this.inherited(arguments)},_positionScrollers:function(){var a=this.domNode,b=this._columnSetScrollers,c=this._columnSetScrollerContents,d=this.columnSets,e=0,l=0,f,h;f=0;for(d=
d.length;f<d;f++)h=k('.dgrid-column-set[data-dgrid-column-set-id\x3d"'+f+'"]',a)[0],e=h.offsetWidth,h=h.firstChild.offsetWidth,c[f].style.width=h+"px",b[f].style.width=e+"px",9>g("ie")&&(b[f].style.overflowX=h>e?"scroll":"auto"),h>e&&l++;this._columnSetScrollerNode.style.bottom=this.showFooter?this.footerNode.offsetHeight+"px":"0";this.bodyNode.style.bottom=l?g("dom-scrollbar-height")+(g("ie")?1:0)+"px":"0"},_putScroller:function(a,b){var c=this._columnSetScrollers[b]=l(this._columnSetScrollerNode,
"span"+(9>g("ie")||g("ff")?".dgrid-scrollbar-height":"")+".dgrid-column-set-scroller.dgrid-column-set-scroller-"+b+"[data-dgrid-column-set-id\x3d"+b+"]");this._columnSetScrollerContents[b]=l(c,"div.dgrid-column-set-scroller-content");n(c,"scroll",A.hitch(this,"_onColumnSetScroll"))},_onColumnSetScroll:function(a){var b=a.target.scrollLeft;a=a.target.getAttribute("data-dgrid-column-set-id");var c;this._columnSetScrollLefts[a]!=b&&(k('.dgrid-column-set[data-dgrid-column-set-id\x3d"'+a+'"],.dgrid-column-set-scroller[data-dgrid-column-set-id\x3d"'+
a+'"]',this.domNode).forEach(function(a,e){a.scrollLeft=b;e||(c=a.scrollLeft)}),this._columnSetScrollLefts[a]=c)},_setColumnSets:function(a){this._destroyColumns();this.columnSets=a;this._updateColumns()},setColumnSets:function(a){y.deprecated("setColumnSets(...)",'use set("columnSets", ...) instead',"dgrid 0.4");this.set("columnSets",a)},_scrollColumnSet:function(a,b){var c=a.tagName?a.getAttribute("data-dgrid-column-set-id"):a;this._columnSetScrollers[c].scrollLeft=0>b?0:b},_onColumnSetCellFocus:function(a,
b){var c=a.target,d=b.getAttribute("data-dgrid-column-set-id"),d=this._columnSetScrollers[d];(c.offsetLeft-d.scrollLeft+c.offsetWidth>b.offsetWidth||d.scrollLeft>c.offsetLeft)&&this._scrollColumnSet(b,c.offsetLeft)}})});