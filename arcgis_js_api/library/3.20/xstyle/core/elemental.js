//>>built
define("xstyle/core/elemental",["put-selector/put","xstyle/core/utils"],function(B,C){function l(a,b,d,e){function c(a){if(!d)return e(a);var b=a.target;do if(n(b,d))return e(a);while((b=b.parentNode)&&1===b.nodeType)}D?a.addEventListener(b,c,!!u[b]):E(a,u[b]||b,c)}function E(a,b,d){b="on"+b;var e=a[b];a[b]=function(a){a=a||window.event;a.target=a.target||a.srcElement;e&&e(a);d(a)}}function v(a){/e/.test(k.readyState||"")?a():k.addEventListener("DOMContentLoaded",a)}function w(a){for(var b=k.querySelectorAll(a.selector),
d=a.name,e=0,c=b.length;e<c;e++){var f=b[e],g=f.elementalStyle;g||(g=f.elementalStyle={},f.elementalSpecificities={});var h=f.renderings;h||(h=f.renderings=[],p.push(f));h.push({name:d,rendered:g[d]==a.propertyValue,renderer:a});g[d]=a.propertyValue}}function x(){for(;p.length;){for(var a=p.shift(),b=a.renderings,d=a.elementalStyle;b.length;){var e=b.shift(),c=e.renderer,f=c.rendered;q=d[e.name]==c.propertyValue;if(!f&&q)try{c.render(a)}catch(m){console.error(m,m.stack),B(a,"div.error",m.toString())}f&&
!q&&c.unrender&&c.unrender(a)}a.renderings=void 0}}function y(a,b){for(var d=0,e=g.length;d<e;d++){var c=g[d];b&&b!=c.selector||!n(a,c.rule)||c.render(a)}}function z(a,b){var d={selector:a.selector,rule:a,render:b};g.push(d);r&&w(d);x();return{remove:function(){g.splice(g.indexOf(d),1)}}}var k=document,F=1,D=!!k.addEventListener,u={blur:"focusout",focus:"focusin"};l(k,"change",null,function(a){a=a.target;for(var b=0,d=t.length;b<d;b++){var e=t[b];if(-1<(" "+a.className+" ").indexOf(e.rule.selector.slice(1))){var c=
e.definition.valueOf();c&&c.forRule&&(c=c.forRule(e.rule));c&&c.forElement&&(c=c.forElement(a));var f="checkbox"===a.type?a.checked:a.value;"number"===typeof c&&isFinite(f)&&(f=+f);(c=e.definition.put(f))&&c.forRule&&(c=c.forRule(e.rule));c&&c.forElement&&c.forElement(a)}}});navigator.userAgent.match(/MSIE|Trident/)&&l(k,"keydown",null,function(a){if(13==a.keyCode){var b=a.target;if(document.createEvent)a=document.createEvent("Events"),a.initEvent("change",!0,!0),b.dispatchEvent(a);else document.onchange({target:b})}});
var h=k.createElement("div"),G={"dom-qsa2.1":!!h.querySelectorAll},A=h.matches||h.matchesSelector||h.webkitMatchesSelector||h.mozMatchesSelector||h.msMatchesSelector||h.oMatchesSelector,g=[],t=[],p=[],r;v(function(){if(!r)if(r=!0,G["dom-qsa2.1"]){for(var a=0,b=g.length;a<b;a++)w(g[a]);x()}else for(var d=k.all,a=0,b=d.length;a<b;a++)y(d[a])});var q,n=A?function(a,b){return A.call(a,b.selector)}:function(a,b){b.ieId||b.setStyle(b.ieId="x-ie-"+F++,"true");return!!a.currentStyle[b.ieId]};return{ready:v,
on:l,matchesRule:n,addRenderer:z,addInputConnector:function(a,b){t.push({rule:a,definition:b})},update:y,clearRenderers:function(){g=[]},observeForElement:function(a,b,d){return C.when(a,function(a){function c(a){a.observe?a.observe(d):d(a)}a.forElement?z(b,function(b){c(a.forElement(b))}):c(a)})}}});